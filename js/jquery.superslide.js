(function(a){a.fn.slide=function(b){a.fn.slide.deflunt={effect:"fade",autoPlay:false,delayTime:500,interTime:2500,defaultIndex:0,titCell:".hd li",mainCell:".bd",trigger:"mouseover",scroll:1,vis:1,titOnClassName:"on",autoPage:false,prevCell:".prev",nextCell:".next"};return this.each(function(){var j=a.extend({},a.fn.slide.deflunt,b);var g=j.defaultIndex;var h=a(j.prevCell,a(this));var r=a(j.nextCell,a(this));var p=a(j.titCell,a(this));var n=p.size();var o=a(j.mainCell,a(this));var k=o.children().size();var l=0;var d=0;var m=0;var u=0;var q=j.autoPlay;var f=null;var c=g;if(k<j.vis){return}if(n==0){n=k}if(j.autoPage){var e=k-j.vis;n=1+parseInt(e%j.scroll!=0?(e/j.scroll+1):(e/j.scroll));p.html("");for(var s=0;s<n;s++){p.append("<li>"+(s+1)+"</li>")}var p=a("li",p)}o.children().each(function(){if(a(this).width()>m){m=a(this).width();d=a(this).outerWidth(true)}if(a(this).height()>u){u=a(this).height();l=a(this).outerHeight(true)}});switch(j.effect){case"top":o.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+j.vis*l+'px"></div>').css({position:"relative",padding:"0",margin:"0"}).children().css({height:u});break;case"left":o.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+j.vis*d+'px"></div>').css({width:k*d,position:"relative",overflow:"hidden",padding:"0",margin:"0"}).children().css({"float":"left",width:m});break;case"leftLoop":case"leftMarquee":o.children().clone().appendTo(o).clone().prependTo(o);o.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+j.vis*d+'px"></div>').css({width:k*d*3,position:"relative",overflow:"hidden",padding:"0",margin:"0",left:-k*d}).children().css({"float":"left",width:m});break;case"topLoop":case"topMarquee":o.children().clone().appendTo(o).clone().prependTo(o);o.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+j.vis*l+'px"></div>').css({height:k*l*3,position:"relative",padding:"0",margin:"0",top:-k*l}).children().css({height:u});break}var t=function(){switch(j.effect){case"fade":case"top":case"left":if(g>=n){g=0}else{if(g<0){g=n-1}}break;case"leftMarquee":case"topMarquee":if(g>=2){g=1}else{if(g<0){g=0}}break;case"leftLoop":case"topLoop":var x=g-c;if(n>2&&x==-(n-1)){x=1}if(n>2&&x==(n-1)){x=-1}var w=Math.abs(x*j.scroll);if(g>=n){g=0}else{if(g<0){g=n-1}}break}switch(j.effect){case"fade":o.children().stop(true,true).eq(g).fadeIn(j.delayTime).siblings().hide();break;case"top":o.stop(true,true).animate({top:-g*j.scroll*l},j.delayTime);break;case"left":o.stop(true,true).animate({left:-g*j.scroll*d},j.delayTime);break;case"leftLoop":if(x<0){o.stop(true,true).animate({left:-(k-w)*d},j.delayTime,function(){for(var z=0;z<w;z++){o.children().last().prependTo(o)}o.css("left",-k*d)})}else{o.stop(true,true).animate({left:-(k+w)*d},j.delayTime,function(){for(var z=0;z<w;z++){o.children().first().appendTo(o)}o.css("left",-k*d)})}break;case"topLoop":if(x<0){o.stop(true,true).animate({top:-(k-w)*l},j.delayTime,function(){for(var z=0;z<w;z++){o.children().last().prependTo(o)}o.css("top",-k*l)})}else{o.stop(true,true).animate({top:-(k+w)*l},j.delayTime,function(){for(var z=0;z<w;z++){o.children().first().appendTo(o)}o.css("top",-k*l)})}break;case"leftMarquee":var y=o.css("left").replace("px","");if(g==0){o.animate({left:++y},0,function(){if(o.css("left").replace("px","")>=0){for(var z=0;z<k;z++){o.children().last().prependTo(o)}o.css("left",-k*d)}})}else{o.animate({left:--y},0,function(){if(o.css("left").replace("px","")<=-k*d*2){for(var z=0;z<k;z++){o.children().first().appendTo(o)}o.css("left",-k*d)}})}break;case"topMarquee":var i=o.css("top").replace("px","");if(g==0){o.animate({top:++i},0,function(){if(o.css("top").replace("px","")>=0){for(var z=0;z<k;z++){o.children().last().prependTo(o)}o.css("top",-k*l)}})}else{o.animate({top:--i},0,function(){if(o.css("top").replace("px","")<=-k*l*2){for(var z=0;z<k;z++){o.children().first().appendTo(o)}o.css("top",-k*l)}})}break}p.removeClass(j.titOnClassName).eq(g).addClass(j.titOnClassName);c=g};t();if(q){if(j.effect=="leftMarquee"||j.effect=="topMarquee"){g++;f=setInterval(t,j.interTime);o.hover(function(){if(q){clearInterval(f)}},function(){if(q){clearInterval(f);f=setInterval(t,j.interTime)}})}else{f=setInterval(function(){g++;t()},j.interTime);a(this).hover(function(){if(q){clearInterval(f)}},function(){if(q){clearInterval(f);f=setInterval(function(){g++;t()},j.interTime)}})}}var v;if(j.trigger=="mouseover"){p.hover(function(){clearTimeout(v);g=p.index(this);v=window.setTimeout(t,200)},function(){if(!v){clearTimeout(v)}})}else{p.click(function(){g=p.index(this);t()})}r.click(function(){g++;t()});h.click(function(){g--;t()})})}})(jQuery);